[
  {
    "command": "python3 immich-smart-albums.py --include-metadata-union filters/metadata-2023-Q3.json --include-local-filter-union '[{\"path\":\"$.exifInfo.make\",\"regex\":\"Nikon\"}]' --include-local-filter-intersection '[{\"path\":\"$.exifInfo.model\",\"regex\":\"D850\"}]' --exclude-local-filter-union '[{\"path\":\"$.tags[*].name\",\"regex\":\"work\"}]' --exclude-local-filter-intersection '[{\"path\":\"$.tags[*].name\",\"regex\":\"private\"}]' | sort",
    "timestamp": "2025-03-09T17:28:23.623115",
    "output": "\u001b[93mInclude filter intersection returned 0 assets - final result must be empty\u001b[0m\n\u001b[93mNo assets matched all criteria.\u001b[0m\nFilter '$.exifInfo.make:Nikon' (include, union mode) matched 0 assets\nFilter '$.exifInfo.model:D850' (include, intersection mode) matched 0 assets\nFilter '$.tags[*].name:private' (exclude, intersection mode) matched 0 assets\nFilter '$.tags[*].name:work' (exclude, union mode) matched 0 assets\nFound 2028 assets matching metadata criteria in filters/metadata-2023-Q3.json\nLoaded 1 exclude intersection filters\nLoaded 1 exclude union filters\nLoaded 1 include intersection filters\nLoaded 1 include union filters\nMetadata search union result: 2028 assets\nProcessing 1 metadata search files\nProcessing metadata file [1/1]: filters/metadata-2023-Q3.json\n",
    "return_code": 0,
    "status": "PASSED"
  },
  {
    "command": "python3 immich-smart-albums.py --include-metadata-union filters/metadata-2023-Q3.json --include-local-filter-union '[{\"path\":\"$.exifInfo.make\",\"regex\":\"Nikon\"}]' --include-local-filter-intersection '[{\"path\":\"$.exifInfo.model\",\"regex\":\"D850\"}]' --exclude-local-filter-union '[{\"path\":\"$.tags[*].name\",\"regex\":\"work\"}]' --exclude-local-filter-intersection '[{\"path\":\"$.tags[*].name\",\"regex\":\"private\"}]' | sort",
    "timestamp": "2025-03-09T17:33:04.000924",
    "output": "\u001b[93mInclude filter intersection returned 0 assets - final result must be empty\u001b[0m\n\u001b[93mNo assets matched all criteria.\u001b[0m\nFilter '$.exifInfo.make:Nikon' (include, union mode) matched 0 assets\nFilter '$.exifInfo.model:D850' (include, intersection mode) matched 0 assets\nFilter '$.tags[*].name:private' (exclude, intersection mode) matched 0 assets\nFilter '$.tags[*].name:work' (exclude, union mode) matched 0 assets\nFound 2028 assets matching metadata criteria in filters/metadata-2023-Q3.json\nLoaded 1 exclude intersection filters\nLoaded 1 exclude union filters\nLoaded 1 include intersection filters\nLoaded 1 include union filters\nMetadata search union result: 2028 assets\nProcessing 1 metadata search files\nProcessing metadata file [1/1]: filters/metadata-2023-Q3.json\n",
    "return_code": 0,
    "status": "PASSED"
  },
  {
    "command": "python3 immich-smart-albums.py --include-metadata-union filters/metadata-2023-Q3.json --include-local-filter-union '[{\"path\":\"$.exifInfo.make\",\"regex\":\"Nikon\"}]' --include-local-filter-intersection '[{\"path\":\"$.exifInfo.model\",\"regex\":\"D850\"}]' --exclude-local-filter-union '[{\"path\":\"$.tags[*].name\",\"regex\":\"work\"}]' --exclude-local-filter-intersection '[{\"path\":\"$.tags[*].name\",\"regex\":\"private\"}]' | sort",
    "timestamp": "2025-03-09T21:40:30.257744",
    "output": "\u001b[93mNo assets matched all criteria.\u001b[0m\nFilter '$.exifInfo.make:Nikon' (include, union mode) matched 0 assets\nFilter '$.exifInfo.model:D850' (include, intersection mode) matched 0 assets\nFilter '$.tags[*].name:private' (exclude, intersection mode) matched 0 assets\nFilter '$.tags[*].name:work' (exclude, union mode) matched 0 assets\nFinal merged asset IDs after applying all criteria: 0 assets\n        [MERGE - LEAF] Entering leaf node with mode 'intersection'. Query keys: ['local']\n        [MERGE - LEAF] Entering leaf node with mode 'union'. Query keys: ['filters/metadata-2023-Q3.json']\n        [MERGE - LEAF] Entering leaf node with mode 'union'. Query keys: ['none']\n        [MERGE - LEAF] Intersection result: 0 items\n        [MERGE - LEAF] Raw query counts: {'filters/metadata-2023-Q3.json': 2028}\n        [MERGE - LEAF] Raw query counts: {'local': 0}\n        [MERGE - LEAF] Raw query counts: {'none': 0}\n        [MERGE - LEAF] Union result: 0 items\n        [MERGE - LEAF] Union result: 2028 items\n    [MERGE - NODE] About to merge children with counts: [0]\n[MERGE - NODE] About to merge children with counts: [0, 0]\n    [MERGE - NODE] About to merge children with counts: [2028, 0]\n    [MERGE - NODE] Entering node with mode 'intersection' having 2 children\n[MERGE - NODE] Entering node with mode 'minus' having 2 children\n    [MERGE - NODE] Entering node with mode 'union' having 1 children\n    [MERGE - NODE] Intersection result: 0 items\n[MERGE - NODE] Minus (Subtract) result: 0 items\n    [MERGE - NODE] Union result: 0 items\n",
    "return_code": 0,
    "status": "FAILED",
    "diff": "--- previous\n+++ current\n@@ -1,14 +1,24 @@\n-\u001b[93mInclude filter intersection returned 0 assets - final result must be empty\u001b[0m\n \u001b[93mNo assets matched all criteria.\u001b[0m\n Filter '$.exifInfo.make:Nikon' (include, union mode) matched 0 assets\n Filter '$.exifInfo.model:D850' (include, intersection mode) matched 0 assets\n Filter '$.tags[*].name:private' (exclude, intersection mode) matched 0 assets\n Filter '$.tags[*].name:work' (exclude, union mode) matched 0 assets\n-Found 2028 assets matching metadata criteria in filters/metadata-2023-Q3.json\n-Loaded 1 exclude intersection filters\n-Loaded 1 exclude union filters\n-Loaded 1 include intersection filters\n-Loaded 1 include union filters\n-Metadata search union result: 2028 assets\n-Processing 1 metadata search files\n-Processing metadata file [1/1]: filters/metadata-2023-Q3.json\n+Final merged asset IDs after applying all criteria: 0 assets\n+        [MERGE - LEAF] Entering leaf node with mode 'intersection'. Query keys: ['local']\n+        [MERGE - LEAF] Entering leaf node with mode 'union'. Query keys: ['filters/metadata-2023-Q3.json']\n+        [MERGE - LEAF] Entering leaf node with mode 'union'. Query keys: ['none']\n+        [MERGE - LEAF] Intersection result: 0 items\n+        [MERGE - LEAF] Raw query counts: {'filters/metadata-2023-Q3.json': 2028}\n+        [MERGE - LEAF] Raw query counts: {'local': 0}\n+        [MERGE - LEAF] Raw query counts: {'none': 0}\n+        [MERGE - LEAF] Union result: 0 items\n+        [MERGE - LEAF] Union result: 2028 items\n+    [MERGE - NODE] About to merge children with counts: [0]\n+[MERGE - NODE] About to merge children with counts: [0, 0]\n+    [MERGE - NODE] About to merge children with counts: [2028, 0]\n+    [MERGE - NODE] Entering node with mode 'intersection' having 2 children\n+[MERGE - NODE] Entering node with mode 'minus' having 2 children\n+    [MERGE - NODE] Entering node with mode 'union' having 1 children\n+    [MERGE - NODE] Intersection result: 0 items\n+[MERGE - NODE] Minus (Subtract) result: 0 items\n+    [MERGE - NODE] Union result: 0 items",
    "suspicious": true
  }
]