[
  {
    "command": "python3 immich-smart-albums.py --include-metadata-intersection filters/metadata-account1-person1.json '{\"takenAfter\":\"2024-12-01T00:00:00.000Z\"}' | sort",
    "timestamp": "2025-03-09T17:16:18.922761",
    "output": "\nFinal assets selected: 36\nFound 1079 assets matching metadata criteria in filters/metadata-account1-person1.json\nFound 1232 assets matching metadata criteria in {\"takenAfter\":\"2024-12-01T00:00:00.000Z\"}\nhttp://127.0.0.1:2283/photos/00f0cb65-5d85-4745-9c09-df35677bb036\nhttp://127.0.0.1:2283/photos/07f194b9-3367-48ef-aac2-ef1998be3604\nhttp://127.0.0.1:2283/photos/0db24bd6-ccf8-4295-bbe4-71280c241005\nhttp://127.0.0.1:2283/photos/121d36ec-4c25-47f2-9a34-530dc5dec5e0\nhttp://127.0.0.1:2283/photos/16ec503c-9fd3-4eed-a0d7-bcfbcb5e07f0\nhttp://127.0.0.1:2283/photos/1c1f4a1c-e1bf-440f-983e-8155a50a2996\nhttp://127.0.0.1:2283/photos/2459bd13-f1ae-4755-9e6f-ebeb513085d5\nhttp://127.0.0.1:2283/photos/2c74e6ab-ee8b-480c-9184-604c0520316e\nhttp://127.0.0.1:2283/photos/2dced0ef-bfe3-4fd1-990d-2bcdfe908df2\nhttp://127.0.0.1:2283/photos/31dcc7e4-21e2-437f-8712-cc1d6324f959\nhttp://127.0.0.1:2283/photos/3bec98e6-1803-4d44-b080-69218264d73d\nhttp://127.0.0.1:2283/photos/3d671c3f-64d0-4c04-91d2-57574eb1afee\nhttp://127.0.0.1:2283/photos/43881bfa-60f9-4e8c-9ce6-01db5094299c\nhttp://127.0.0.1:2283/photos/4d0850a6-bfcf-48a1-a686-74f5bbb97bdb\nhttp://127.0.0.1:2283/photos/62da3a2a-36c6-439a-b7c0-6987007f0312\nhttp://127.0.0.1:2283/photos/63703635-df3c-4ef5-b6c1-8935e7965ffa\nhttp://127.0.0.1:2283/photos/66830df6-39ee-4fc9-8a6b-4cc7e7ed89ad\nhttp://127.0.0.1:2283/photos/73c9977e-532d-4172-9b0e-c5f6d464e2c8\nhttp://127.0.0.1:2283/photos/7f288cd5-f4c7-4ae6-9cf7-06c3fdbc7754\nhttp://127.0.0.1:2283/photos/82dbc358-89d6-4ce0-803d-8e6b5c18fe8c\nhttp://127.0.0.1:2283/photos/84b493b2-8c53-4f59-8447-b17c3da0983e\nhttp://127.0.0.1:2283/photos/8520a53c-e9a5-4069-bf5a-60e10d9b4a51\nhttp://127.0.0.1:2283/photos/862825bd-478f-4c29-a454-aab6555f5541\nhttp://127.0.0.1:2283/photos/93736569-7328-4991-97cf-833c7c80b6b7\nhttp://127.0.0.1:2283/photos/acc134f5-eec2-454d-ad4b-92256626be29\nhttp://127.0.0.1:2283/photos/b287134b-929a-479b-83d0-55b7b0b63456\nhttp://127.0.0.1:2283/photos/c4a4bbca-dae5-45e3-ac81-75d0641c66f7\nhttp://127.0.0.1:2283/photos/d74e2320-f461-4d52-ae5d-fcb0d0d5d320\nhttp://127.0.0.1:2283/photos/d77c0982-c2f8-4101-849e-e72cc49adb8a\nhttp://127.0.0.1:2283/photos/dc830e0c-b68d-4ac0-b802-5e3cc760adb4\nhttp://127.0.0.1:2283/photos/de47d447-527d-483b-9902-41902d1f5f1e\nhttp://127.0.0.1:2283/photos/e19c7b8a-1036-47e7-be26-2c87f33cd049\nhttp://127.0.0.1:2283/photos/f66b1336-de96-4266-b18f-a8bee0f1a224\nhttp://127.0.0.1:2283/photos/f7e96361-8a40-4bac-a451-2038631972af\nhttp://127.0.0.1:2283/photos/fa41e537-35a5-46c1-ba90-5ba335b867ae\nhttp://127.0.0.1:2283/photos/feff3800-e52b-42b9-beda-1fb5a2dad8fe\nLoaded 0 exclude intersection filters\nLoaded 0 exclude union filters\nLoaded 0 include intersection filters\nLoaded 0 include union filters\nMetadata search intersection result: 36 assets\nProcessing 2 metadata search files\nProcessing metadata file [1/2]: filters/metadata-account1-person1.json\nProcessing metadata file [2/2]: {\"takenAfter\":\"2024-12-01T00:00:00.000Z\"}\n",
    "return_code": 0,
    "status": "PASSED"
  },
  {
    "command": "python3 immich-smart-albums.py --include-metadata-intersection filters/metadata-account1-person1.json '{\"takenAfter\":\"2024-12-01T00:00:00.000Z\"}' | sort",
    "timestamp": "2025-03-09T17:27:11.978000",
    "output": "\nFinal assets selected: 36\nFound 1079 assets matching metadata criteria in filters/metadata-account1-person1.json\nFound 1232 assets matching metadata criteria in {\"takenAfter\":\"2024-12-01T00:00:00.000Z\"}\nhttp://127.0.0.1:2283/photos/00f0cb65-5d85-4745-9c09-df35677bb036\nhttp://127.0.0.1:2283/photos/07f194b9-3367-48ef-aac2-ef1998be3604\nhttp://127.0.0.1:2283/photos/0db24bd6-ccf8-4295-bbe4-71280c241005\nhttp://127.0.0.1:2283/photos/121d36ec-4c25-47f2-9a34-530dc5dec5e0\nhttp://127.0.0.1:2283/photos/16ec503c-9fd3-4eed-a0d7-bcfbcb5e07f0\nhttp://127.0.0.1:2283/photos/1c1f4a1c-e1bf-440f-983e-8155a50a2996\nhttp://127.0.0.1:2283/photos/2459bd13-f1ae-4755-9e6f-ebeb513085d5\nhttp://127.0.0.1:2283/photos/2c74e6ab-ee8b-480c-9184-604c0520316e\nhttp://127.0.0.1:2283/photos/2dced0ef-bfe3-4fd1-990d-2bcdfe908df2\nhttp://127.0.0.1:2283/photos/31dcc7e4-21e2-437f-8712-cc1d6324f959\nhttp://127.0.0.1:2283/photos/3bec98e6-1803-4d44-b080-69218264d73d\nhttp://127.0.0.1:2283/photos/3d671c3f-64d0-4c04-91d2-57574eb1afee\nhttp://127.0.0.1:2283/photos/43881bfa-60f9-4e8c-9ce6-01db5094299c\nhttp://127.0.0.1:2283/photos/4d0850a6-bfcf-48a1-a686-74f5bbb97bdb\nhttp://127.0.0.1:2283/photos/62da3a2a-36c6-439a-b7c0-6987007f0312\nhttp://127.0.0.1:2283/photos/63703635-df3c-4ef5-b6c1-8935e7965ffa\nhttp://127.0.0.1:2283/photos/66830df6-39ee-4fc9-8a6b-4cc7e7ed89ad\nhttp://127.0.0.1:2283/photos/73c9977e-532d-4172-9b0e-c5f6d464e2c8\nhttp://127.0.0.1:2283/photos/7f288cd5-f4c7-4ae6-9cf7-06c3fdbc7754\nhttp://127.0.0.1:2283/photos/82dbc358-89d6-4ce0-803d-8e6b5c18fe8c\nhttp://127.0.0.1:2283/photos/84b493b2-8c53-4f59-8447-b17c3da0983e\nhttp://127.0.0.1:2283/photos/8520a53c-e9a5-4069-bf5a-60e10d9b4a51\nhttp://127.0.0.1:2283/photos/862825bd-478f-4c29-a454-aab6555f5541\nhttp://127.0.0.1:2283/photos/93736569-7328-4991-97cf-833c7c80b6b7\nhttp://127.0.0.1:2283/photos/acc134f5-eec2-454d-ad4b-92256626be29\nhttp://127.0.0.1:2283/photos/b287134b-929a-479b-83d0-55b7b0b63456\nhttp://127.0.0.1:2283/photos/c4a4bbca-dae5-45e3-ac81-75d0641c66f7\nhttp://127.0.0.1:2283/photos/d74e2320-f461-4d52-ae5d-fcb0d0d5d320\nhttp://127.0.0.1:2283/photos/d77c0982-c2f8-4101-849e-e72cc49adb8a\nhttp://127.0.0.1:2283/photos/dc830e0c-b68d-4ac0-b802-5e3cc760adb4\nhttp://127.0.0.1:2283/photos/de47d447-527d-483b-9902-41902d1f5f1e\nhttp://127.0.0.1:2283/photos/e19c7b8a-1036-47e7-be26-2c87f33cd049\nhttp://127.0.0.1:2283/photos/f66b1336-de96-4266-b18f-a8bee0f1a224\nhttp://127.0.0.1:2283/photos/f7e96361-8a40-4bac-a451-2038631972af\nhttp://127.0.0.1:2283/photos/fa41e537-35a5-46c1-ba90-5ba335b867ae\nhttp://127.0.0.1:2283/photos/feff3800-e52b-42b9-beda-1fb5a2dad8fe\nLoaded 0 exclude intersection filters\nLoaded 0 exclude union filters\nLoaded 0 include intersection filters\nLoaded 0 include union filters\nMetadata search intersection result: 36 assets\nProcessing 2 metadata search files\nProcessing metadata file [1/2]: filters/metadata-account1-person1.json\nProcessing metadata file [2/2]: {\"takenAfter\":\"2024-12-01T00:00:00.000Z\"}\n",
    "return_code": 0,
    "status": "PASSED"
  },
  {
    "command": "python3 immich-smart-albums.py --include-metadata-intersection filters/metadata-account1-person1.json '{\"takenAfter\":\"2024-12-01T00:00:00.000Z\"}' | sort",
    "timestamp": "2025-03-09T17:31:52.418694",
    "output": "\nFinal assets selected: 36\nFound 1079 assets matching metadata criteria in filters/metadata-account1-person1.json\nFound 1232 assets matching metadata criteria in {\"takenAfter\":\"2024-12-01T00:00:00.000Z\"}\nhttp://127.0.0.1:2283/photos/00f0cb65-5d85-4745-9c09-df35677bb036\nhttp://127.0.0.1:2283/photos/07f194b9-3367-48ef-aac2-ef1998be3604\nhttp://127.0.0.1:2283/photos/0db24bd6-ccf8-4295-bbe4-71280c241005\nhttp://127.0.0.1:2283/photos/121d36ec-4c25-47f2-9a34-530dc5dec5e0\nhttp://127.0.0.1:2283/photos/16ec503c-9fd3-4eed-a0d7-bcfbcb5e07f0\nhttp://127.0.0.1:2283/photos/1c1f4a1c-e1bf-440f-983e-8155a50a2996\nhttp://127.0.0.1:2283/photos/2459bd13-f1ae-4755-9e6f-ebeb513085d5\nhttp://127.0.0.1:2283/photos/2c74e6ab-ee8b-480c-9184-604c0520316e\nhttp://127.0.0.1:2283/photos/2dced0ef-bfe3-4fd1-990d-2bcdfe908df2\nhttp://127.0.0.1:2283/photos/31dcc7e4-21e2-437f-8712-cc1d6324f959\nhttp://127.0.0.1:2283/photos/3bec98e6-1803-4d44-b080-69218264d73d\nhttp://127.0.0.1:2283/photos/3d671c3f-64d0-4c04-91d2-57574eb1afee\nhttp://127.0.0.1:2283/photos/43881bfa-60f9-4e8c-9ce6-01db5094299c\nhttp://127.0.0.1:2283/photos/4d0850a6-bfcf-48a1-a686-74f5bbb97bdb\nhttp://127.0.0.1:2283/photos/62da3a2a-36c6-439a-b7c0-6987007f0312\nhttp://127.0.0.1:2283/photos/63703635-df3c-4ef5-b6c1-8935e7965ffa\nhttp://127.0.0.1:2283/photos/66830df6-39ee-4fc9-8a6b-4cc7e7ed89ad\nhttp://127.0.0.1:2283/photos/73c9977e-532d-4172-9b0e-c5f6d464e2c8\nhttp://127.0.0.1:2283/photos/7f288cd5-f4c7-4ae6-9cf7-06c3fdbc7754\nhttp://127.0.0.1:2283/photos/82dbc358-89d6-4ce0-803d-8e6b5c18fe8c\nhttp://127.0.0.1:2283/photos/84b493b2-8c53-4f59-8447-b17c3da0983e\nhttp://127.0.0.1:2283/photos/8520a53c-e9a5-4069-bf5a-60e10d9b4a51\nhttp://127.0.0.1:2283/photos/862825bd-478f-4c29-a454-aab6555f5541\nhttp://127.0.0.1:2283/photos/93736569-7328-4991-97cf-833c7c80b6b7\nhttp://127.0.0.1:2283/photos/acc134f5-eec2-454d-ad4b-92256626be29\nhttp://127.0.0.1:2283/photos/b287134b-929a-479b-83d0-55b7b0b63456\nhttp://127.0.0.1:2283/photos/c4a4bbca-dae5-45e3-ac81-75d0641c66f7\nhttp://127.0.0.1:2283/photos/d74e2320-f461-4d52-ae5d-fcb0d0d5d320\nhttp://127.0.0.1:2283/photos/d77c0982-c2f8-4101-849e-e72cc49adb8a\nhttp://127.0.0.1:2283/photos/dc830e0c-b68d-4ac0-b802-5e3cc760adb4\nhttp://127.0.0.1:2283/photos/de47d447-527d-483b-9902-41902d1f5f1e\nhttp://127.0.0.1:2283/photos/e19c7b8a-1036-47e7-be26-2c87f33cd049\nhttp://127.0.0.1:2283/photos/f66b1336-de96-4266-b18f-a8bee0f1a224\nhttp://127.0.0.1:2283/photos/f7e96361-8a40-4bac-a451-2038631972af\nhttp://127.0.0.1:2283/photos/fa41e537-35a5-46c1-ba90-5ba335b867ae\nhttp://127.0.0.1:2283/photos/feff3800-e52b-42b9-beda-1fb5a2dad8fe\nLoaded 0 exclude intersection filters\nLoaded 0 exclude union filters\nLoaded 0 include intersection filters\nLoaded 0 include union filters\nMetadata search intersection result: 36 assets\nProcessing 2 metadata search files\nProcessing metadata file [1/2]: filters/metadata-account1-person1.json\nProcessing metadata file [2/2]: {\"takenAfter\":\"2024-12-01T00:00:00.000Z\"}\n",
    "return_code": 0,
    "status": "PASSED"
  },
  {
    "command": "python3 immich-smart-albums.py --include-metadata-intersection filters/metadata-account1-person1.json '{\"takenAfter\":\"2024-12-01T00:00:00.000Z\"}' | sort",
    "timestamp": "2025-03-09T21:39:19.691260",
    "output": "\nFinal assets selected: 36\nFinal merged asset IDs after applying all criteria: 36 assets\nhttp://127.0.0.1:2283/photos/00f0cb65-5d85-4745-9c09-df35677bb036\nhttp://127.0.0.1:2283/photos/07f194b9-3367-48ef-aac2-ef1998be3604\nhttp://127.0.0.1:2283/photos/0db24bd6-ccf8-4295-bbe4-71280c241005\nhttp://127.0.0.1:2283/photos/121d36ec-4c25-47f2-9a34-530dc5dec5e0\nhttp://127.0.0.1:2283/photos/16ec503c-9fd3-4eed-a0d7-bcfbcb5e07f0\nhttp://127.0.0.1:2283/photos/1c1f4a1c-e1bf-440f-983e-8155a50a2996\nhttp://127.0.0.1:2283/photos/2459bd13-f1ae-4755-9e6f-ebeb513085d5\nhttp://127.0.0.1:2283/photos/2c74e6ab-ee8b-480c-9184-604c0520316e\nhttp://127.0.0.1:2283/photos/2dced0ef-bfe3-4fd1-990d-2bcdfe908df2\nhttp://127.0.0.1:2283/photos/31dcc7e4-21e2-437f-8712-cc1d6324f959\nhttp://127.0.0.1:2283/photos/3bec98e6-1803-4d44-b080-69218264d73d\nhttp://127.0.0.1:2283/photos/3d671c3f-64d0-4c04-91d2-57574eb1afee\nhttp://127.0.0.1:2283/photos/43881bfa-60f9-4e8c-9ce6-01db5094299c\nhttp://127.0.0.1:2283/photos/4d0850a6-bfcf-48a1-a686-74f5bbb97bdb\nhttp://127.0.0.1:2283/photos/62da3a2a-36c6-439a-b7c0-6987007f0312\nhttp://127.0.0.1:2283/photos/63703635-df3c-4ef5-b6c1-8935e7965ffa\nhttp://127.0.0.1:2283/photos/66830df6-39ee-4fc9-8a6b-4cc7e7ed89ad\nhttp://127.0.0.1:2283/photos/73c9977e-532d-4172-9b0e-c5f6d464e2c8\nhttp://127.0.0.1:2283/photos/7f288cd5-f4c7-4ae6-9cf7-06c3fdbc7754\nhttp://127.0.0.1:2283/photos/82dbc358-89d6-4ce0-803d-8e6b5c18fe8c\nhttp://127.0.0.1:2283/photos/84b493b2-8c53-4f59-8447-b17c3da0983e\nhttp://127.0.0.1:2283/photos/8520a53c-e9a5-4069-bf5a-60e10d9b4a51\nhttp://127.0.0.1:2283/photos/862825bd-478f-4c29-a454-aab6555f5541\nhttp://127.0.0.1:2283/photos/93736569-7328-4991-97cf-833c7c80b6b7\nhttp://127.0.0.1:2283/photos/acc134f5-eec2-454d-ad4b-92256626be29\nhttp://127.0.0.1:2283/photos/b287134b-929a-479b-83d0-55b7b0b63456\nhttp://127.0.0.1:2283/photos/c4a4bbca-dae5-45e3-ac81-75d0641c66f7\nhttp://127.0.0.1:2283/photos/d74e2320-f461-4d52-ae5d-fcb0d0d5d320\nhttp://127.0.0.1:2283/photos/d77c0982-c2f8-4101-849e-e72cc49adb8a\nhttp://127.0.0.1:2283/photos/dc830e0c-b68d-4ac0-b802-5e3cc760adb4\nhttp://127.0.0.1:2283/photos/de47d447-527d-483b-9902-41902d1f5f1e\nhttp://127.0.0.1:2283/photos/e19c7b8a-1036-47e7-be26-2c87f33cd049\nhttp://127.0.0.1:2283/photos/f66b1336-de96-4266-b18f-a8bee0f1a224\nhttp://127.0.0.1:2283/photos/f7e96361-8a40-4bac-a451-2038631972af\nhttp://127.0.0.1:2283/photos/fa41e537-35a5-46c1-ba90-5ba335b867ae\nhttp://127.0.0.1:2283/photos/feff3800-e52b-42b9-beda-1fb5a2dad8fe\n            [MERGE - LEAF] Entering leaf node with mode 'union'. Query keys: ['filters/metadata-account1-person1.json']\n        [MERGE - LEAF] Entering leaf node with mode 'union'. Query keys: ['none']\n            [MERGE - LEAF] Entering leaf node with mode 'union'. Query keys: ['{\"takenAfter\":\"2024-12-01T00:00:00.000Z\"}']\n            [MERGE - LEAF] Raw query counts: {'filters/metadata-account1-person1.json': 1079}\n        [MERGE - LEAF] Raw query counts: {'none': 0}\n            [MERGE - LEAF] Raw query counts: {'{\"takenAfter\":\"2024-12-01T00:00:00.000Z\"}': 1231}\n        [MERGE - LEAF] Union result: 0 items\n            [MERGE - LEAF] Union result: 1079 items\n            [MERGE - LEAF] Union result: 1231 items\n    [MERGE - NODE] About to merge children with counts: [0]\n        [MERGE - NODE] About to merge children with counts: [1079, 1231]\n    [MERGE - NODE] About to merge children with counts: [36]\n[MERGE - NODE] About to merge children with counts: [36, 0]\n    [MERGE - NODE] Entering node with mode 'intersection' having 1 children\n        [MERGE - NODE] Entering node with mode 'intersection' having 2 children\n[MERGE - NODE] Entering node with mode 'minus' having 2 children\n    [MERGE - NODE] Entering node with mode 'union' having 1 children\n        [MERGE - NODE] Intersection result: 36 items\n    [MERGE - NODE] Intersection result: 36 items\n[MERGE - NODE] Minus (Subtract) result: 36 items\n    [MERGE - NODE] Union result: 0 items\n",
    "return_code": 0,
    "status": "FAILED",
    "diff": "--- previous\n+++ current\n@@ -1,7 +1,6 @@\n \n Final assets selected: 36\n-Found 1079 assets matching metadata criteria in filters/metadata-account1-person1.json\n-Found 1232 assets matching metadata criteria in {\"takenAfter\":\"2024-12-01T00:00:00.000Z\"}\n+Final merged asset IDs after applying all criteria: 36 assets\n http://127.0.0.1:2283/photos/00f0cb65-5d85-4745-9c09-df35677bb036\n http://127.0.0.1:2283/photos/07f194b9-3367-48ef-aac2-ef1998be3604\n http://127.0.0.1:2283/photos/0db24bd6-ccf8-4295-bbe4-71280c241005\n@@ -38,11 +37,24 @@\n http://127.0.0.1:2283/photos/f7e96361-8a40-4bac-a451-2038631972af\n http://127.0.0.1:2283/photos/fa41e537-35a5-46c1-ba90-5ba335b867ae\n http://127.0.0.1:2283/photos/feff3800-e52b-42b9-beda-1fb5a2dad8fe\n-Loaded 0 exclude intersection filters\n-Loaded 0 exclude union filters\n-Loaded 0 include intersection filters\n-Loaded 0 include union filters\n-Metadata search intersection result: 36 assets\n-Processing 2 metadata search files\n-Processing metadata file [1/2]: filters/metadata-account1-person1.json\n-Processing metadata file [2/2]: {\"takenAfter\":\"2024-12-01T00:00:00.000Z\"}\n+            [MERGE - LEAF] Entering leaf node with mode 'union'. Query keys: ['filters/metadata-account1-person1.json']\n+        [MERGE - LEAF] Entering leaf node with mode 'union'. Query keys: ['none']\n+            [MERGE - LEAF] Entering leaf node with mode 'union'. Query keys: ['{\"takenAfter\":\"2024-12-01T00:00:00.000Z\"}']\n+            [MERGE - LEAF] Raw query counts: {'filters/metadata-account1-person1.json': 1079}\n+        [MERGE - LEAF] Raw query counts: {'none': 0}\n+            [MERGE - LEAF] Raw query counts: {'{\"takenAfter\":\"2024-12-01T00:00:00.000Z\"}': 1231}\n+        [MERGE - LEAF] Union result: 0 items\n+            [MERGE - LEAF] Union result: 1079 items\n+            [MERGE - LEAF] Union result: 1231 items\n+    [MERGE - NODE] About to merge children with counts: [0]\n+        [MERGE - NODE] About to merge children with counts: [1079, 1231]\n+    [MERGE - NODE] About to merge children with counts: [36]\n+[MERGE - NODE] About to merge children with counts: [36, 0]\n+    [MERGE - NODE] Entering node with mode 'intersection' having 1 children\n+        [MERGE - NODE] Entering node with mode 'intersection' having 2 children\n+[MERGE - NODE] Entering node with mode 'minus' having 2 children\n+    [MERGE - NODE] Entering node with mode 'union' having 1 children\n+        [MERGE - NODE] Intersection result: 36 items\n+    [MERGE - NODE] Intersection result: 36 items\n+[MERGE - NODE] Minus (Subtract) result: 36 items\n+    [MERGE - NODE] Union result: 0 items",
    "suspicious": true
  }
]