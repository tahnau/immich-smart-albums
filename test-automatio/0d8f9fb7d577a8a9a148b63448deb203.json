[
  {
    "command": "python3 immich-smart-albums.py --include-metadata-union filters/metadata-2024-Q3.json --include-smart-union filters/smart-nsfw-6.json --exclude-metadata-union filters/metadata-favorites.json | sort",
    "timestamp": "2025-03-09T17:16:00.681346",
    "output": "\nExcluded 0 assets from search results, remaining: 16\nFinal assets selected: 16\nFound 1934 assets matching metadata criteria in filters/metadata-2024-Q3.json\nFound 300 assets matching smart criteria in filters/smart-nsfw-6.json\nFound 48 assets matching metadata criteria in filters/metadata-favorites.json\nhttp://127.0.0.1:2283/photos/0fa53493-bd34-4ed8-8260-cf3543f60c1c\nhttp://127.0.0.1:2283/photos/2a43c83e-0b0f-4885-8a3a-7b8a5ab4eb30\nhttp://127.0.0.1:2283/photos/3d880b20-6308-4529-8994-e2a7c0aed73d\nhttp://127.0.0.1:2283/photos/505dddf8-d205-4f64-a8e1-6b9a4cb17fc8\nhttp://127.0.0.1:2283/photos/57eab6fb-20d0-442d-aa63-2696be7e5210\nhttp://127.0.0.1:2283/photos/5cc91336-146c-42e0-b966-4babd874f173\nhttp://127.0.0.1:2283/photos/642654b1-6dfa-4e6d-933a-adaf2e1d0029\nhttp://127.0.0.1:2283/photos/6d1c1118-21a1-4a39-ba4b-9efc2366e96b\nhttp://127.0.0.1:2283/photos/6fc771c0-81a6-4fd7-af57-3b0f8eabb5ce\nhttp://127.0.0.1:2283/photos/734ac0d8-71d1-40dd-a7cc-2f5bc5216a26\nhttp://127.0.0.1:2283/photos/8d884898-907b-40ca-bd83-6aa715c66130\nhttp://127.0.0.1:2283/photos/9768cc4e-3fde-4d6a-a5eb-071bbf4048da\nhttp://127.0.0.1:2283/photos/aaa21b18-40e7-439c-b302-719b34e3af79\nhttp://127.0.0.1:2283/photos/cd08eaaf-c88b-4013-bea9-8e2a3f3bc842\nhttp://127.0.0.1:2283/photos/ed1452b1-c7cd-4c81-98fe-bf588b1927fe\nhttp://127.0.0.1:2283/photos/fcaaebf4-bad4-458c-9b89-1e2a877379d5\nIntersection between metadata and smart searches: 16 assets\nLoaded 0 exclude intersection filters\nLoaded 0 exclude union filters\nLoaded 0 include intersection filters\nLoaded 0 include union filters\nMetadata search union result: 1934 assets\nProcessing 1 metadata search files\nProcessing 1 metadata search files\nProcessing 1 smart search files\nProcessing metadata file [1/1]: filters/metadata-2024-Q3.json\nProcessing metadata file [1/1]: filters/metadata-favorites.json\nProcessing smart file [1/1]: filters/smart-nsfw-6.json\nSmart search union result: 300 assets\n",
    "return_code": 0,
    "status": "PASSED"
  },
  {
    "command": "python3 immich-smart-albums.py --include-metadata-union filters/metadata-2024-Q3.json --include-smart-union filters/smart-nsfw-6.json --exclude-metadata-union filters/metadata-favorites.json | sort",
    "timestamp": "2025-03-09T17:26:50.649956",
    "output": "\nExcluded 0 assets from search results, remaining: 16\nFinal assets selected: 16\nFound 1934 assets matching metadata criteria in filters/metadata-2024-Q3.json\nFound 300 assets matching smart criteria in filters/smart-nsfw-6.json\nFound 48 assets matching metadata criteria in filters/metadata-favorites.json\nhttp://127.0.0.1:2283/photos/0fa53493-bd34-4ed8-8260-cf3543f60c1c\nhttp://127.0.0.1:2283/photos/2a43c83e-0b0f-4885-8a3a-7b8a5ab4eb30\nhttp://127.0.0.1:2283/photos/3d880b20-6308-4529-8994-e2a7c0aed73d\nhttp://127.0.0.1:2283/photos/505dddf8-d205-4f64-a8e1-6b9a4cb17fc8\nhttp://127.0.0.1:2283/photos/57eab6fb-20d0-442d-aa63-2696be7e5210\nhttp://127.0.0.1:2283/photos/5cc91336-146c-42e0-b966-4babd874f173\nhttp://127.0.0.1:2283/photos/642654b1-6dfa-4e6d-933a-adaf2e1d0029\nhttp://127.0.0.1:2283/photos/6d1c1118-21a1-4a39-ba4b-9efc2366e96b\nhttp://127.0.0.1:2283/photos/6fc771c0-81a6-4fd7-af57-3b0f8eabb5ce\nhttp://127.0.0.1:2283/photos/734ac0d8-71d1-40dd-a7cc-2f5bc5216a26\nhttp://127.0.0.1:2283/photos/8d884898-907b-40ca-bd83-6aa715c66130\nhttp://127.0.0.1:2283/photos/9768cc4e-3fde-4d6a-a5eb-071bbf4048da\nhttp://127.0.0.1:2283/photos/aaa21b18-40e7-439c-b302-719b34e3af79\nhttp://127.0.0.1:2283/photos/cd08eaaf-c88b-4013-bea9-8e2a3f3bc842\nhttp://127.0.0.1:2283/photos/ed1452b1-c7cd-4c81-98fe-bf588b1927fe\nhttp://127.0.0.1:2283/photos/fcaaebf4-bad4-458c-9b89-1e2a877379d5\nIntersection between metadata and smart searches: 16 assets\nLoaded 0 exclude intersection filters\nLoaded 0 exclude union filters\nLoaded 0 include intersection filters\nLoaded 0 include union filters\nMetadata search union result: 1934 assets\nProcessing 1 metadata search files\nProcessing 1 metadata search files\nProcessing 1 smart search files\nProcessing metadata file [1/1]: filters/metadata-2024-Q3.json\nProcessing metadata file [1/1]: filters/metadata-favorites.json\nProcessing smart file [1/1]: filters/smart-nsfw-6.json\nSmart search union result: 300 assets\n",
    "return_code": 0,
    "status": "PASSED"
  },
  {
    "command": "python3 immich-smart-albums.py --include-metadata-union filters/metadata-2024-Q3.json --include-smart-union filters/smart-nsfw-6.json --exclude-metadata-union filters/metadata-favorites.json | sort",
    "timestamp": "2025-03-09T17:31:31.556340",
    "output": "\nExcluded 0 assets from search results, remaining: 16\nFinal assets selected: 16\nFound 1934 assets matching metadata criteria in filters/metadata-2024-Q3.json\nFound 300 assets matching smart criteria in filters/smart-nsfw-6.json\nFound 48 assets matching metadata criteria in filters/metadata-favorites.json\nhttp://127.0.0.1:2283/photos/0fa53493-bd34-4ed8-8260-cf3543f60c1c\nhttp://127.0.0.1:2283/photos/2a43c83e-0b0f-4885-8a3a-7b8a5ab4eb30\nhttp://127.0.0.1:2283/photos/3d880b20-6308-4529-8994-e2a7c0aed73d\nhttp://127.0.0.1:2283/photos/505dddf8-d205-4f64-a8e1-6b9a4cb17fc8\nhttp://127.0.0.1:2283/photos/57eab6fb-20d0-442d-aa63-2696be7e5210\nhttp://127.0.0.1:2283/photos/5cc91336-146c-42e0-b966-4babd874f173\nhttp://127.0.0.1:2283/photos/642654b1-6dfa-4e6d-933a-adaf2e1d0029\nhttp://127.0.0.1:2283/photos/6d1c1118-21a1-4a39-ba4b-9efc2366e96b\nhttp://127.0.0.1:2283/photos/6fc771c0-81a6-4fd7-af57-3b0f8eabb5ce\nhttp://127.0.0.1:2283/photos/734ac0d8-71d1-40dd-a7cc-2f5bc5216a26\nhttp://127.0.0.1:2283/photos/8d884898-907b-40ca-bd83-6aa715c66130\nhttp://127.0.0.1:2283/photos/9768cc4e-3fde-4d6a-a5eb-071bbf4048da\nhttp://127.0.0.1:2283/photos/aaa21b18-40e7-439c-b302-719b34e3af79\nhttp://127.0.0.1:2283/photos/cd08eaaf-c88b-4013-bea9-8e2a3f3bc842\nhttp://127.0.0.1:2283/photos/ed1452b1-c7cd-4c81-98fe-bf588b1927fe\nhttp://127.0.0.1:2283/photos/fcaaebf4-bad4-458c-9b89-1e2a877379d5\nIntersection between metadata and smart searches: 16 assets\nLoaded 0 exclude intersection filters\nLoaded 0 exclude union filters\nLoaded 0 include intersection filters\nLoaded 0 include union filters\nMetadata search union result: 1934 assets\nProcessing 1 metadata search files\nProcessing 1 metadata search files\nProcessing 1 smart search files\nProcessing metadata file [1/1]: filters/metadata-2024-Q3.json\nProcessing metadata file [1/1]: filters/metadata-favorites.json\nProcessing smart file [1/1]: filters/smart-nsfw-6.json\nSmart search union result: 300 assets\n",
    "return_code": 0,
    "status": "PASSED"
  },
  {
    "command": "python3 immich-smart-albums.py --include-metadata-union filters/metadata-2024-Q3.json --include-smart-union filters/smart-nsfw-6.json --exclude-metadata-union filters/metadata-favorites.json | sort",
    "timestamp": "2025-03-09T21:37:50.583530",
    "output": "\nFinal assets selected: 16\nFinal merged asset IDs after applying all criteria: 16 assets\nhttp://127.0.0.1:2283/photos/0fa53493-bd34-4ed8-8260-cf3543f60c1c\nhttp://127.0.0.1:2283/photos/2a43c83e-0b0f-4885-8a3a-7b8a5ab4eb30\nhttp://127.0.0.1:2283/photos/3d880b20-6308-4529-8994-e2a7c0aed73d\nhttp://127.0.0.1:2283/photos/505dddf8-d205-4f64-a8e1-6b9a4cb17fc8\nhttp://127.0.0.1:2283/photos/57eab6fb-20d0-442d-aa63-2696be7e5210\nhttp://127.0.0.1:2283/photos/5cc91336-146c-42e0-b966-4babd874f173\nhttp://127.0.0.1:2283/photos/642654b1-6dfa-4e6d-933a-adaf2e1d0029\nhttp://127.0.0.1:2283/photos/6d1c1118-21a1-4a39-ba4b-9efc2366e96b\nhttp://127.0.0.1:2283/photos/6fc771c0-81a6-4fd7-af57-3b0f8eabb5ce\nhttp://127.0.0.1:2283/photos/734ac0d8-71d1-40dd-a7cc-2f5bc5216a26\nhttp://127.0.0.1:2283/photos/8d884898-907b-40ca-bd83-6aa715c66130\nhttp://127.0.0.1:2283/photos/9768cc4e-3fde-4d6a-a5eb-071bbf4048da\nhttp://127.0.0.1:2283/photos/aaa21b18-40e7-439c-b302-719b34e3af79\nhttp://127.0.0.1:2283/photos/cd08eaaf-c88b-4013-bea9-8e2a3f3bc842\nhttp://127.0.0.1:2283/photos/ed1452b1-c7cd-4c81-98fe-bf588b1927fe\nhttp://127.0.0.1:2283/photos/fcaaebf4-bad4-458c-9b89-1e2a877379d5\n        [MERGE - LEAF] Entering leaf node with mode 'union'. Query keys: ['filters/metadata-2024-Q3.json']\n        [MERGE - LEAF] Entering leaf node with mode 'union'. Query keys: ['filters/metadata-favorites.json']\n        [MERGE - LEAF] Entering leaf node with mode 'union'. Query keys: ['filters/smart-nsfw-6.json']\n        [MERGE - LEAF] Raw query counts: {'filters/metadata-2024-Q3.json': 1934}\n        [MERGE - LEAF] Raw query counts: {'filters/metadata-favorites.json': 48}\n        [MERGE - LEAF] Raw query counts: {'filters/smart-nsfw-6.json': 300}\n        [MERGE - LEAF] Union result: 1934 items\n        [MERGE - LEAF] Union result: 300 items\n        [MERGE - LEAF] Union result: 48 items\n[MERGE - NODE] About to merge children with counts: [16, 48]\n    [MERGE - NODE] About to merge children with counts: [1934, 300]\n    [MERGE - NODE] About to merge children with counts: [48]\n    [MERGE - NODE] Entering node with mode 'intersection' having 2 children\n[MERGE - NODE] Entering node with mode 'minus' having 2 children\n    [MERGE - NODE] Entering node with mode 'union' having 1 children\n    [MERGE - NODE] Intersection result: 16 items\n[MERGE - NODE] Minus (Subtract) result: 16 items\n    [MERGE - NODE] Union result: 48 items\n",
    "return_code": 0,
    "status": "FAILED",
    "diff": "--- previous\n+++ current\n@@ -1,9 +1,6 @@\n \n-Excluded 0 assets from search results, remaining: 16\n Final assets selected: 16\n-Found 1934 assets matching metadata criteria in filters/metadata-2024-Q3.json\n-Found 300 assets matching smart criteria in filters/smart-nsfw-6.json\n-Found 48 assets matching metadata criteria in filters/metadata-favorites.json\n+Final merged asset IDs after applying all criteria: 16 assets\n http://127.0.0.1:2283/photos/0fa53493-bd34-4ed8-8260-cf3543f60c1c\n http://127.0.0.1:2283/photos/2a43c83e-0b0f-4885-8a3a-7b8a5ab4eb30\n http://127.0.0.1:2283/photos/3d880b20-6308-4529-8994-e2a7c0aed73d\n@@ -20,16 +17,21 @@\n http://127.0.0.1:2283/photos/cd08eaaf-c88b-4013-bea9-8e2a3f3bc842\n http://127.0.0.1:2283/photos/ed1452b1-c7cd-4c81-98fe-bf588b1927fe\n http://127.0.0.1:2283/photos/fcaaebf4-bad4-458c-9b89-1e2a877379d5\n-Intersection between metadata and smart searches: 16 assets\n-Loaded 0 exclude intersection filters\n-Loaded 0 exclude union filters\n-Loaded 0 include intersection filters\n-Loaded 0 include union filters\n-Metadata search union result: 1934 assets\n-Processing 1 metadata search files\n-Processing 1 metadata search files\n-Processing 1 smart search files\n-Processing metadata file [1/1]: filters/metadata-2024-Q3.json\n-Processing metadata file [1/1]: filters/metadata-favorites.json\n-Processing smart file [1/1]: filters/smart-nsfw-6.json\n-Smart search union result: 300 assets\n+        [MERGE - LEAF] Entering leaf node with mode 'union'. Query keys: ['filters/metadata-2024-Q3.json']\n+        [MERGE - LEAF] Entering leaf node with mode 'union'. Query keys: ['filters/metadata-favorites.json']\n+        [MERGE - LEAF] Entering leaf node with mode 'union'. Query keys: ['filters/smart-nsfw-6.json']\n+        [MERGE - LEAF] Raw query counts: {'filters/metadata-2024-Q3.json': 1934}\n+        [MERGE - LEAF] Raw query counts: {'filters/metadata-favorites.json': 48}\n+        [MERGE - LEAF] Raw query counts: {'filters/smart-nsfw-6.json': 300}\n+        [MERGE - LEAF] Union result: 1934 items\n+        [MERGE - LEAF] Union result: 300 items\n+        [MERGE - LEAF] Union result: 48 items\n+[MERGE - NODE] About to merge children with counts: [16, 48]\n+    [MERGE - NODE] About to merge children with counts: [1934, 300]\n+    [MERGE - NODE] About to merge children with counts: [48]\n+    [MERGE - NODE] Entering node with mode 'intersection' having 2 children\n+[MERGE - NODE] Entering node with mode 'minus' having 2 children\n+    [MERGE - NODE] Entering node with mode 'union' having 1 children\n+    [MERGE - NODE] Intersection result: 16 items\n+[MERGE - NODE] Minus (Subtract) result: 16 items\n+    [MERGE - NODE] Union result: 48 items",
    "suspicious": true
  }
]