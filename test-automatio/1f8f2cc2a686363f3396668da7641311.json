[
  {
    "command": "python3 immich-smart-albums.py --include-smart-union filters/smart-vehicles.json --include-smart-intersection filters/smart-nsfw-1.json | sort",
    "timestamp": "2025-03-09T16:59:16.819072",
    "output": "\nCombined smart search result (union \u2229 intersection): 1 assets\nFinal assets selected: 1\nFound 300 assets matching smart criteria in filters/smart-nsfw-1.json\nFound 300 assets matching smart criteria in filters/smart-vehicles.json\nhttp://127.0.0.1:2283/photos/f6c18bda-417b-4cd4-8a42-52eaf4ed540c\nLoaded 0 exclude intersection filters\nLoaded 0 exclude union filters\nLoaded 0 include intersection filters\nLoaded 0 include union filters\nProcessing 1 smart search files\nProcessing 1 smart search files\nProcessing smart file [1/1]: filters/smart-nsfw-1.json\nProcessing smart file [1/1]: filters/smart-vehicles.json\n",
    "return_code": 0,
    "status": "PASSED"
  },
  {
    "command": "python3 immich-smart-albums.py --include-smart-union filters/smart-vehicles.json --include-smart-intersection filters/smart-nsfw-1.json | sort",
    "timestamp": "2025-03-09T17:01:12.161126",
    "output": "\nCombined smart search result (union \u2229 intersection): 1 assets\nFinal assets selected: 1\nFound 300 assets matching smart criteria in filters/smart-nsfw-1.json\nFound 300 assets matching smart criteria in filters/smart-vehicles.json\nhttp://127.0.0.1:2283/photos/f6c18bda-417b-4cd4-8a42-52eaf4ed540c\nLoaded 0 exclude intersection filters\nLoaded 0 exclude union filters\nLoaded 0 include intersection filters\nLoaded 0 include union filters\nProcessing 1 smart search files\nProcessing 1 smart search files\nProcessing smart file [1/1]: filters/smart-nsfw-1.json\nProcessing smart file [1/1]: filters/smart-vehicles.json\n",
    "return_code": 0,
    "status": "PASSED"
  },
  {
    "command": "python3 immich-smart-albums.py --include-smart-union filters/smart-vehicles.json --include-smart-intersection filters/smart-nsfw-1.json | sort",
    "timestamp": "2025-03-09T17:16:49.949265",
    "output": "\nCombined smart search result (union \u2229 intersection): 1 assets\nFinal assets selected: 1\nFound 300 assets matching smart criteria in filters/smart-nsfw-1.json\nFound 300 assets matching smart criteria in filters/smart-vehicles.json\nhttp://127.0.0.1:2283/photos/f6c18bda-417b-4cd4-8a42-52eaf4ed540c\nLoaded 0 exclude intersection filters\nLoaded 0 exclude union filters\nLoaded 0 include intersection filters\nLoaded 0 include union filters\nProcessing 1 smart search files\nProcessing 1 smart search files\nProcessing smart file [1/1]: filters/smart-nsfw-1.json\nProcessing smart file [1/1]: filters/smart-vehicles.json\n",
    "return_code": 0,
    "status": "PASSED"
  },
  {
    "command": "python3 immich-smart-albums.py --include-smart-union filters/smart-vehicles.json --include-smart-intersection filters/smart-nsfw-1.json | sort",
    "timestamp": "2025-03-09T17:27:55.368526",
    "output": "\nCombined smart search result (union \u2229 intersection): 1 assets\nFinal assets selected: 1\nFound 300 assets matching smart criteria in filters/smart-nsfw-1.json\nFound 300 assets matching smart criteria in filters/smart-vehicles.json\nhttp://127.0.0.1:2283/photos/f6c18bda-417b-4cd4-8a42-52eaf4ed540c\nLoaded 0 exclude intersection filters\nLoaded 0 exclude union filters\nLoaded 0 include intersection filters\nLoaded 0 include union filters\nProcessing 1 smart search files\nProcessing 1 smart search files\nProcessing smart file [1/1]: filters/smart-nsfw-1.json\nProcessing smart file [1/1]: filters/smart-vehicles.json\n",
    "return_code": 0,
    "status": "PASSED"
  },
  {
    "command": "python3 immich-smart-albums.py --include-smart-union filters/smart-vehicles.json --include-smart-intersection filters/smart-nsfw-1.json | sort",
    "timestamp": "2025-03-09T17:32:35.619663",
    "output": "\nCombined smart search result (union \u2229 intersection): 1 assets\nFinal assets selected: 1\nFound 300 assets matching smart criteria in filters/smart-nsfw-1.json\nFound 300 assets matching smart criteria in filters/smart-vehicles.json\nhttp://127.0.0.1:2283/photos/f6c18bda-417b-4cd4-8a42-52eaf4ed540c\nLoaded 0 exclude intersection filters\nLoaded 0 exclude union filters\nLoaded 0 include intersection filters\nLoaded 0 include union filters\nProcessing 1 smart search files\nProcessing 1 smart search files\nProcessing smart file [1/1]: filters/smart-nsfw-1.json\nProcessing smart file [1/1]: filters/smart-vehicles.json\n",
    "return_code": 0,
    "status": "PASSED"
  },
  {
    "command": "python3 immich-smart-albums.py --include-smart-union filters/smart-vehicles.json --include-smart-intersection filters/smart-nsfw-1.json | sort",
    "timestamp": "2025-03-09T21:39:55.756962",
    "output": "\nFinal assets selected: 1\nFinal merged asset IDs after applying all criteria: 1 assets\nhttp://127.0.0.1:2283/photos/f6c18bda-417b-4cd4-8a42-52eaf4ed540c\n        [MERGE - LEAF] Entering leaf node with mode 'union'. Query keys: ['filters/smart-nsfw-1.json']\n        [MERGE - LEAF] Entering leaf node with mode 'union'. Query keys: ['filters/smart-vehicles.json']\n        [MERGE - LEAF] Entering leaf node with mode 'union'. Query keys: ['none']\n        [MERGE - LEAF] Raw query counts: {'filters/smart-nsfw-1.json': 300}\n        [MERGE - LEAF] Raw query counts: {'filters/smart-vehicles.json': 300}\n        [MERGE - LEAF] Raw query counts: {'none': 0}\n        [MERGE - LEAF] Union result: 0 items\n        [MERGE - LEAF] Union result: 300 items\n        [MERGE - LEAF] Union result: 300 items\n    [MERGE - NODE] About to merge children with counts: [0]\n[MERGE - NODE] About to merge children with counts: [1, 0]\n    [MERGE - NODE] About to merge children with counts: [300, 300]\n    [MERGE - NODE] Entering node with mode 'intersection' having 2 children\n[MERGE - NODE] Entering node with mode 'minus' having 2 children\n    [MERGE - NODE] Entering node with mode 'union' having 1 children\n    [MERGE - NODE] Intersection result: 1 items\n[MERGE - NODE] Minus (Subtract) result: 1 items\n    [MERGE - NODE] Union result: 0 items\n",
    "return_code": 0,
    "status": "FAILED",
    "diff": "--- previous\n+++ current\n@@ -1,14 +1,22 @@\n \n-Combined smart search result (union \u2229 intersection): 1 assets\n Final assets selected: 1\n-Found 300 assets matching smart criteria in filters/smart-nsfw-1.json\n-Found 300 assets matching smart criteria in filters/smart-vehicles.json\n+Final merged asset IDs after applying all criteria: 1 assets\n http://127.0.0.1:2283/photos/f6c18bda-417b-4cd4-8a42-52eaf4ed540c\n-Loaded 0 exclude intersection filters\n-Loaded 0 exclude union filters\n-Loaded 0 include intersection filters\n-Loaded 0 include union filters\n-Processing 1 smart search files\n-Processing 1 smart search files\n-Processing smart file [1/1]: filters/smart-nsfw-1.json\n-Processing smart file [1/1]: filters/smart-vehicles.json\n+        [MERGE - LEAF] Entering leaf node with mode 'union'. Query keys: ['filters/smart-nsfw-1.json']\n+        [MERGE - LEAF] Entering leaf node with mode 'union'. Query keys: ['filters/smart-vehicles.json']\n+        [MERGE - LEAF] Entering leaf node with mode 'union'. Query keys: ['none']\n+        [MERGE - LEAF] Raw query counts: {'filters/smart-nsfw-1.json': 300}\n+        [MERGE - LEAF] Raw query counts: {'filters/smart-vehicles.json': 300}\n+        [MERGE - LEAF] Raw query counts: {'none': 0}\n+        [MERGE - LEAF] Union result: 0 items\n+        [MERGE - LEAF] Union result: 300 items\n+        [MERGE - LEAF] Union result: 300 items\n+    [MERGE - NODE] About to merge children with counts: [0]\n+[MERGE - NODE] About to merge children with counts: [1, 0]\n+    [MERGE - NODE] About to merge children with counts: [300, 300]\n+    [MERGE - NODE] Entering node with mode 'intersection' having 2 children\n+[MERGE - NODE] Entering node with mode 'minus' having 2 children\n+    [MERGE - NODE] Entering node with mode 'union' having 1 children\n+    [MERGE - NODE] Intersection result: 1 items\n+[MERGE - NODE] Minus (Subtract) result: 1 items\n+    [MERGE - NODE] Union result: 0 items",
    "suspicious": true
  }
]